## FunctionDef upgrade
**upgrade**: The function of upgrade is to create multiple database tables for the application schema.

**parameters**: The parameters of this Function.
· There are no parameters for this function.

**Code Description**: The upgrade function is responsible for executing a series of commands that create new tables in the database schema using Alembic, a database migration tool for SQLAlchemy. The function begins with a comment indicating that the commands are auto-generated by Alembic, suggesting that the code may be modified as needed.

The function creates the following tables:

1. **Model**: This table includes the following columns:
   - `model_id`: An integer that serves as the primary key and cannot be null.
   - `provider`: A string with a maximum length of 45 characters, which can be null.
   - `name`: A string with a maximum length of 45 characters, which can be null.
   - `description`: A string with a maximum length of 1000 characters, which can be null.

2. **User**: This table includes the following columns:
   - `user_id`: An integer that serves as the primary key and cannot be null.
   - `email`: A string with a maximum length of 255 characters, which can be null.
   - `name`: A string with a maximum length of 255 characters, which can be null.

3. **Repository**: This table includes the following columns:
   - `repository_id`: An integer that serves as the primary key and cannot be null.
   - `name`: A string with a maximum length of 255 characters, which can be null.
   - `type`: A string with a maximum length of 45 characters, which can be null.
   - `status`: A string with a maximum length of 45 characters, which can be null.
   - `app_id`: An integer that can be null and serves as a foreign key referencing the `app_id` in the `App` table.

4. **Agent**: This table includes the following columns:
   - `agent_id`: An integer that serves as the primary key and cannot be null.
   - `name`: A string with a maximum length of 255 characters, which can be null.
   - `description`: A string with a maximum length of 1000 characters, which can be null.
   - `system_prompt`: A text field that can be null.
   - `prompt_template`: A text field that can be null.
   - `type`: A string with a maximum length of 45 characters, which can be null.
   - `status`: A string with a maximum length of 45 characters, which can be null.
   - `model_id`: An integer that can be null and serves as a foreign key referencing the `model_id` in the `Model` table.
   - `repository_id`: An integer that can be null and serves as a foreign key referencing the `repository_id` in the `Repository` table.
   - `app_id`: An integer that can be null and serves as a foreign key referencing the `app_id` in the `App` table.
   - `has_memory`: A boolean that can be null.

5. **Resource**: This table includes the following columns:
   - `resource_id`: An integer that serves as the primary key and cannot be null.
   - `name`: A string with a maximum length of 255 characters, which can be null.
   - `uri`: A string with a maximum length of 1000 characters, which can be null.
   - `type`: A string with a maximum length of 45 characters, which can be null.
   - `status`: A string with a maximum length of 45 characters, which can be null.
   - `repository_id`: An integer that can be null and serves as a foreign key referencing the `repository_id` in the `Repository` table.

Each table is defined with its respective columns, data types, and constraints, including primary keys and foreign key relationships, ensuring referential integrity within the database schema.

**Note**: It is important to review and adjust the auto-generated commands as necessary to fit the specific requirements of the application. Additionally, ensure that the foreign key references align with the existing tables in the database to avoid integrity issues.
## FunctionDef downgrade
**downgrade**: The function of downgrade is to revert the database schema to a previous state by removing specific tables.

**parameters**: The parameters of this Function.
· There are no parameters for this function.

**Code Description**: The downgrade function is designed to execute a series of commands that remove specific tables from the database schema. This function is automatically generated by Alembic, a database migration tool for SQLAlchemy, and is intended to be used when reverting to a previous version of the database. The function contains five commands that drop the following tables: 'Resource', 'Agent', 'Repository', 'User', and 'Model'. Each command is executed in sequence, ensuring that these tables are completely removed from the database. This operation is critical in scenarios where a migration needs to be undone, allowing the database to return to a stable state prior to the changes made by a previous migration.

**Note**: It is important to ensure that no critical data is lost when executing this function, as dropping tables will permanently remove all associated data. Users should verify that a backup exists or that the data is no longer needed before performing a downgrade operation. Additionally, this function should be used with caution in production environments to avoid unintended data loss.
